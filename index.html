<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Revergy | DataCore Cyber_Terminal</title>
    <style>
        @import url('https://fonts.googleapis.com');

        :root { 
            --rv-blue: #004a99; 
            --rv-cyan: #00f2ff; 
            --rv-dark: #010816; 
            --rv-panel: rgba(2, 12, 34, 0.9); 
            --border: rgba(0, 242, 255, 0.2); 
            --text-main: #e2e8f0; 
            --neon-glow: 0 0 20px rgba(0, 242, 255, 0.4); 
        }

        * { box-sizing: border-box; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        
        body { 
            margin: 0; height: 100vh; background: var(--rv-dark); 
            font-family: 'JetBrains Mono', monospace; color: var(--text-main); 
            display: flex; justify-content: center; align-items: center; overflow: hidden; 
            background-image: 
                radial-gradient(circle at 50% 50%, rgba(0, 74, 153, 0.1) 0%, transparent 80%),
                linear-gradient(rgba(0, 242, 255, 0.03) 1px, transparent 1px), 
                linear-gradient(90deg, rgba(0, 242, 255, 0.03) 1px, transparent 1px); 
            background-size: 100% 100%, 40px 40px, 40px 40px;
        }

        #app { 
            width: 96%; max-width: 1500px; height: 92vh; background: var(--rv-panel); 
            backdrop-filter: blur(30px); border-radius: 30px; display: flex; 
            border: 1px solid var(--border); box-shadow: 0 0 100px rgba(0,0,0,0.9); 
            overflow: hidden; position: relative;
        }

        #sidebar { 
            width: 320px; background: rgba(0, 0, 0, 0.6); padding: 40px 25px; 
            border-right: 1px solid var(--border); overflow-y: auto; z-index: 2; 
        }

        #logo-container { 
            width: 100%; height: 120px; margin-bottom: 35px; 
            background: url("13-revergy_reducida.png") no-repeat center; 
            background-size: contain; filter: drop-shadow(0 0 15px rgba(0, 242, 255, 0.3));
        }

        .cat-title { 
            font-family: 'Orbitron', sans-serif; font-size: 11px; font-weight: 900; 
            color: var(--rv-cyan); letter-spacing: 4px; margin: 40px 0 15px; 
            text-transform: uppercase; text-shadow: var(--neon-glow);
        }

        .nav-item { 
            font-size: 13px; color: #94a3b8; padding: 14px 15px; cursor: pointer; 
            border-radius: 12px; display: block; text-decoration: none;
        }
        .nav-item:hover { color: white; background: rgba(0, 242, 255, 0.1); transform: translateX(8px); }

        #chat-area { flex: 1; display: flex; flex-direction: column; position: relative; overflow: hidden; }

        /* NUEVO EFECTO: RESPLANDOR DE DATOS EST√ÅTICO (Reemplaza al l√°ser) */
        #chat-area::before {
            content: ""; position: absolute; inset: 0;
            background: radial-gradient(circle at center, transparent 40%, rgba(0, 242, 255, 0.05) 100%);
            pointer-events: none; z-index: 1;
        }

        #display { flex: 1; padding: 40px; overflow-y: auto; display: flex; flex-direction: column; gap: 30px; scroll-behavior: smooth; z-index: 2; }

        .msg { max-width: 85%; padding: 25px; border-radius: 22px; font-size: 15px; line-height: 1.7; animation: fadeInUp 0.5s ease-out forwards; overflow: visible; }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        .bot { background: rgba(255, 255, 255, 0.03); border: 1px solid var(--border); align-self: flex-start; border-left: 5px solid var(--rv-cyan); }
        .user { background: linear-gradient(135deg, var(--rv-blue), #001a3d); color: white; align-self: flex-end; }

        .report-box { border-radius: 24px; margin-top: 20px; overflow: hidden; width: 100%; max-width: 600px; box-shadow: 0 20px 50px rgba(0,0,0,0.6); border: 1px solid var(--border); background: #010816; }
        .report-box img { width: 100%; height: auto; display: block; }

        .btn-group { display: flex; background: #0a0f1d; }
        .btn-act { background: transparent; color: var(--rv-cyan); border: none; padding: 18px; flex: 1; cursor: pointer; font-size: 10px; font-weight: 900; font-family: 'Orbitron'; border-right: 1px solid var(--border); text-transform: uppercase; }
        .btn-act:hover { background: var(--rv-cyan); color: #000; }

        #input-zone { padding: 40px 60px; background: rgba(0, 0, 0, 0.5); display: flex; gap: 25px; border-top: 1px solid var(--border); z-index: 5; }
        input { flex: 1; background: rgba(255, 255, 255, 0.05); border: 1px solid var(--border); border-radius: 18px; padding: 22px 30px; color: white; outline: none; }
        input:focus { border-color: var(--rv-cyan); box-shadow: 0 0 15px rgba(0, 242, 255, 0.1); }
        
        #send { background: var(--rv-cyan); border: none; width: 85px; border-radius: 18px; cursor: pointer; font-size: 28px; box-shadow: var(--neon-glow); }

        @media print {
            body { background: white !important; -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }
            #sidebar, #input-zone, .btn-group { display: none !important; }
            #app { width: 100%; height: auto; border: none; display: block; position: static;}
            #display { overflow: visible !important; height: auto !important; display: block;}
            .msg { color: black !important; border: 1px solid #eee !important; break-inside: avoid; max-width: 100%; width: 100%;}
            .print-target { display: block !important; position: absolute; top: 0; left: 0; width: 100%; z-index: 9999; }
        }
    </style>
</head>
<body>

<div id="app">
    <aside id="sidebar">
        <div id="logo-container"></div>
        <div class="cat-title">M√©tricas Power BI</div>
        <a class="nav-item" onclick="ask('stringsbox')">StringsBox</a>
        <a class="nav-item" onclick="ask('hincas')">Hincas</a>
        <a class="nav-item" onclick="ask('trackers')">Trackers</a>
        <a class="nav-item" onclick="ask('modulos')">M√≥dulos</a>
        <a class="nav-item" onclick="ask('predrilling')">Predrilling</a>
        <a class="nav-item" onclick="ask('micropilotes')">Micropilotes</a>
        <div class="cat-title">Gesti√≥n</div>
        <a class="nav-item" onclick="ask('avance general')">Avance General</a>
        <a class="nav-item" onclick="ask('facturacion')">Facturaci√≥n</a>
        <a class="nav-item" onclick="ask('eventos')">Eventos</a>
        <a class="nav-item" onclick="window.print()" style="color:var(--rv-cyan); margin-top:30px; border:1px solid; text-align: center; font-weight: bold;">üì∏ CAPTURA TERMINAL</a>
    </aside>

    <main id="chat-area">
        <div id="display"></div>
        <div id="input-zone">
            <input type="text" id="user-in" placeholder="Iniciando enlace con Puerta de Oro...">
            <button id="send">‚ö°</button>
        </div>
    </main>
</div>

<script>
    const PROYECTO_DATA = {
        stringsbox: { t: 1500, e: 1474, a: 98.27 },
        hincas: { t: 101970, e: 101970, a: 100 },
        trackers: { t: 5733, e: 5733, a: 100 },
        modulos: { t: 511300, e: 501490, a: 98.07 },
        predrilling: { t: 10197, e: 8576, r: 1621, a: 84.10 },
        micropilotes: { t: 5099, e: 1570, r: 3529, a: 30.79 },
        avance: { previsto: "84.10%", peso: "98.07%", contractual: "100.00%" },
        costos: { total: "385.633.885.899,00", eventos: "2.272.365.581,00" }
    };

    const display = document.getElementById('display');
    const input = document.getElementById('user-in');
    const btn = document.getElementById('send');

    function addMsg(html, type) {
        const d = document.createElement('div'); d.className = `msg ${type}`; d.innerHTML = html;
        display.appendChild(d); display.scrollTop = display.scrollHeight;
        return d;
    }

    function analyze(val) {
        const q = val.toLowerCase().trim();

        if (q.match(/(hola|buenos dias|saludos|hey)/)) {
            return setTimeout(() => addMsg("<b>Terminal Revergy:</b> Conexi√≥n establecida. Buen d√≠a estimado operador.", "bot"), 300);
        }
        if (q.match(/(gracias|excelente|perfecto|muy bien|genial)/)) {
            return setTimeout(() => addMsg("Es un placer asistirle, operador.", "bot"), 300);
        }
        if (q.match(/(adios|chao|hasta luego|cerrar|terminar)/)) {
            return setTimeout(() => addMsg("Cerrando sesi√≥n en DataCore. ¬°Hasta pronto!", "bot"), 300);
        }

        let k = "";
        if(q.includes("string")) k = "stringsbox";
        else if(q.includes("hinca")) k = "hincas";
        else if(q.includes("tracker")) k = "trackers";
        else if(q.includes("modulo")) k = "modulos";
        else if(q.includes("predrill")) k = "predrilling";
        else if(q.includes("micro")) k = "micropilotes";

        if(k) draw(k.toUpperCase(), PROYECTO_DATA[k]);
        else if (q.includes("avance")) addMsg(`Avance Previsto: <b>${PROYECTO_DATA.avance.previsto}</b>.`, "bot");
        else addMsg("M√©trica no detectada.", "bot");
    }

    function draw(title, data) {
        const canvas = document.createElement('canvas');
        canvas.width = 600; canvas.height = 380;
        const ctx = canvas.getContext('2d');
        
        ctx.fillStyle = "#010816"; ctx.fillRect(0,0,600,380);
        ctx.fillStyle = "#004a99"; ctx.fillRect(0,0,600,70);
        ctx.fillStyle = "#ffffff"; ctx.font = "bold 20px Orbitron"; ctx.fillText("REVERGY DATACORE REPORT", 25, 45);
        ctx.fillStyle = "#00f2ff"; ctx.font = "bold 28px Orbitron"; ctx.fillText(title, 320, 140);
        ctx.font = "18px JetBrains Mono"; ctx.fillStyle = "#e2e8f0";
        ctx.fillText(`TOTAL: ${data.t.toLocaleString()}`, 320, 190);
        ctx.fillText(`EJECUTADO: ${data.e.toLocaleString()}`, 320, 230);
        ctx.fillStyle = "#00f2ff"; ctx.font = "bold 22px Orbitron"; ctx.fillText(`AVANCE: ${data.a}%`, 320, 275);

        const cx = 160, cy = 210, r = 90;
        ctx.beginPath(); ctx.lineWidth = 15; ctx.strokeStyle = "rgba(0, 242, 255, 0.1)"; ctx.arc(cx, cy, r, 0, Math.PI*2); ctx.stroke();
        ctx.beginPath(); ctx.lineWidth = 15; ctx.strokeStyle = "#00f2ff"; ctx.arc(cx, cy, r, -Math.PI/2, (-Math.PI/2)+(data.a/100*Math.PI*2)); ctx.stroke();
        ctx.fillStyle = "#ffffff"; ctx.textAlign = "center"; ctx.font = "bold 32px Orbitron"; ctx.fillText(data.a+"%", cx, cy+12);

        const imgURL = canvas.toDataURL("image/png");
        const id = 'rep-' + Date.now();
        
        addMsg(`
            <div class="report-box" id="${id}">
                <img src="${imgURL}">
                <div class="btn-group">
                    <button class="btn-act" onclick="downloadPNG('${imgURL}', '${title}')">üì• PNG</button>
                    <button class="btn-act" onclick="printReport('${id}')" style="background:#ce1212; color:#fff">üìÑ PDF</button>
                </div>
            </div>
        `, "bot");
    }

    window.downloadPNG = (u, n) => { 
        const l = document.createElement('a'); l.href = u; l.download = 'Revergy_' + n + '.png'; l.click(); 
    };

    window.printReport = (id) => { 
        const el = document.getElementById(id);
        el.classList.add('print-target');
        setTimeout(() => { window.print(); el.classList.remove('print-target'); }, 250);
    };
    
    window.ask = (t) => { input.value = t; btn.onclick(); };

    btn.onclick = () => { 
        if(input.value.trim()) { 
            const v = input.value; 
            addMsg(v, 'user'); 
            analyze(v); 
            input.value=''; 
        } 
    };

    input.addEventListener("keypress", (e) => {
        if (e.key === "Enter") {
            btn.onclick(); 
        }
    });

    window.onload = () => addMsg("<b>N√öCLEO ACTIVO.</b> Esperando comandos...", "bot");
</script>
</body>
</html>























